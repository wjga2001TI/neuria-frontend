<app-loader [loading]="loading"></app-loader>
<div class="wrapper background">
  <div class="container">
    <div class="row">
      <div class="col-xl-7 col-md-6 col-sm-4"></div>
      <div class="col-xl-4 col-md-6 col-sm-8 my-auto">
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" id="login-form" class="glass">
          <div class="row">
            <div class="col-12 text-center">
              <img src="assets/images/logo.png" class="logo">
            </div>
              <div class="col-12 text-left mt-3">
                  <h4>Crear Nueva Contraseña</h4>
                  <p>Bienvenido de nuevo. Introduce tus credenciales para acceder a tu cuenta.</p>
              </div>

              <div class="col-12">
                  <div class="float-group">
                    <label for="password">Contraseña</label>
                      <input formControlName="password" [type]="hidePass ? 'password' : 'text'"
                      class="form-control error" id="password" placeholder=""
                      [ngClass]="{'error': password?.invalid && (password?.dirty || password?.touched)}">
                      <span class="input-group-append">
                          <button class="input-group-text show-password" (click)="mostrarClave()">
                              <i *ngIf="hidePass" class="fa fa-eye"></i>
                              <i *ngIf="!hidePass" class="fa fa-eye-slash"></i>
                          </button>
                      </span>
                      <div *ngIf="password?.invalid && (password?.dirty || password?.touched)" class="error-message">
                        <span *ngIf="password?.errors?.['required']" class="errors">
                          La contraseña es requerida.
                        </span>
                        <span *ngIf="password?.errors?.['minlength']" class="errors">
                          La contraseña debe tener al menos 6 caracteres.
                        </span>
                        <span *ngIf="password?.errors?.['pattern']" class="errors">
                          La contraseña debe contener letras y números.
                        </span>
                      </div>
                  </div>
              </div>

              <div class="col-12">
                  <div class="float-group">
                    <label for="confirm_password">Verificar Contraseña</label>
                      <input formControlName="confirm_password" [type]="hidePass ? 'password' : 'text'"
                      class="form-control error" id="confirm_password" placeholder=""
                      [ngClass]="{'error': confirmPassword?.invalid && (confirmPassword?.dirty || confirmPassword?.touched)}">
                      <span class="input-group-append">
                          <button class="input-group-text show-password" (click)="mostrarClave()">
                              <i *ngIf="hidePass" class="fa fa-eye"></i>
                              <i *ngIf="!hidePass" class="fa fa-eye-slash"></i>
                          </button>
                      </span>
                      <div
                      *ngIf="confirmPassword?.invalid && (confirmPassword?.dirty || confirmPassword?.touched)" class="error-message">
                        <span *ngIf="confirmPassword?.errors?.['required']" class="errors">
                          Por favor confirma tu contraseña.
                        </span>
                      </div>
                  </div>
              </div>

              <p *ngIf="!validConfirmPassword"
              class="text-danger">Las Contraseñas no coinciden.</p>

              <p *ngIf="success"
              class="text-success">Contraseña actualizada con exito.</p>

              <div class="col-12">
                <button [disabled]="isSubmit"
                type="submit" type="submit" class="btn btn-lg btn-block">
                  Continuar
                </button>
              </div>
          </div>
        </form>
      </div>
      <div class="col-xl-1 d-none"></div>
    </div>
  </div>
</div>
